// ==========================================
// 1. Config
// ==========================================

// Emoji selection.
emoji = "ğŸš€"; //[ğŸ˜€,ğŸ˜ƒ,ğŸ˜„,ğŸ˜,ğŸ˜†,ğŸ˜…,ğŸ¤£,ğŸ˜‚,ğŸ™‚,ğŸ« ,ğŸ˜‰,ğŸ˜Š,ğŸ˜‡,ğŸ¥°,ğŸ˜,ğŸ¤©,ğŸ˜˜,ğŸ˜š,â˜ºï¸,ğŸ˜›,ğŸ¤ª,ğŸ˜‹,ğŸ¤,ğŸ«¡,ğŸ˜·,ğŸ¤ ,ğŸ¥¸,ğŸ˜,ğŸ’€,ğŸ˜ˆ,ğŸ˜¡,â˜ ï¸,ğŸ’©,ğŸ¤¡,ğŸ‘¹,ğŸ‘º,ğŸ‘»,ğŸ‘½,ğŸ¤–,ğŸ™ˆ,ğŸ™‰,ğŸ™Š,ğŸ’˜,ğŸ’”,â¤ï¸â€ğŸ”¥,â¤ï¸â€ğŸ©¹,â¤ï¸,ğŸ’‹,ğŸ’¥,ğŸ’«,ğŸ’¦,ğŸ’¨,ğŸ’¬,ğŸ‘ï¸â€ğŸ—¨ï¸,ğŸ—¨ï¸,ğŸ—¯ï¸,ğŸ’­,ğŸ’¤,â›”,ğŸš«,â˜¢ï¸,â˜£ï¸,âš ï¸,ğŸš¸,ğŸš¹,ğŸšº,â™¿,ğŸš¼,â™‚ï¸,â™€ï¸,âš§ï¸,ğŸ’²,âš•ï¸,â™»ï¸,,âšœï¸,ğŸ”±,ğŸ”°,ğŸŒ,ğŸŒ,ğŸŒ,ğŸŒ,ğŸ§­,ğŸŒ‹,ğŸ–ï¸,ğŸï¸,ğŸŸï¸,ğŸ›ï¸,ğŸ—ï¸,ğŸªµ,ğŸ ,ğŸ¢,ğŸ¥,ğŸ¯,ğŸ°,ğŸ—¼,ğŸ—½,â›ª,ğŸ•Œ,ğŸ›•,ğŸ•,â›©ï¸,ğŸ•‹,â›º,ğŸ›,ğŸ ,ğŸ¡,ğŸ’ˆ,ğŸª,ğŸš‚,ğŸš„,ğŸš†,ğŸš‡,ğŸšˆ,ğŸšŠ,ğŸšŒ,ğŸš‘,ğŸš’,ğŸš“,ğŸš•,ğŸš—,ğŸš™,ğŸ›»,ğŸšš,ğŸš›,ğŸšœ,ğŸï¸,ğŸï¸,ğŸ›µ,ğŸ›º,ğŸš²,ğŸ›´,ğŸ›¹,ğŸ›¼,ğŸ›¢ï¸,â›½,ğŸ›,ğŸš¨,âš“,ğŸ›Ÿ,â›µ,ğŸ›¶,ğŸš¤,ğŸ›³ï¸,â›´ï¸,ğŸ›¥ï¸,ğŸš¢,âœˆï¸,ğŸ›©ï¸,ğŸª‚,ğŸš,ğŸš ,ğŸ›°ï¸,ğŸš€,ğŸ›¸,ğŸ›ï¸,ğŸ§³,âŒ›,â³,âŒš,,â°,â±ï¸,â²ï¸,ğŸ•°ï¸,ğŸŒ‘,ğŸŒ’,ğŸŒ“,ğŸŒ”,ğŸŒ•,ğŸŒ–,ğŸŒ—,ğŸŒ˜,ğŸŒ™,ğŸŒš,ğŸŒ›,ğŸŒœ,ğŸŒ¡ï¸,â˜€ï¸,ğŸª,â­,ğŸŒ ,â˜ï¸,â›…,â›ˆï¸,ğŸŒ¤ï¸,ğŸŒ¥ï¸,ğŸŒ¦ï¸,ğŸŒ§ï¸,ğŸŒ¨ï¸,ğŸŒ©ï¸,ğŸŒªï¸,ğŸŒ€,ğŸŒˆ,â˜‚ï¸,â›±ï¸,âš¡,â„ï¸,â›„,â˜„ï¸,ğŸ”¥,ğŸŒŠ,ğŸ§ ,ğŸ«€,ğŸ«,ğŸ¦·,ğŸ¦´,ğŸ‘€,ğŸ‘ï¸,ğŸ‘…,ğŸ‘„,ğŸ«¦,ğŸ‘¶,ğŸ§’ğŸ»,ğŸ‘¦,ğŸ‘§ğŸ¼,ğŸ§‘ğŸ»,ğŸ‘¨ğŸ»,ğŸ§”,ğŸ§”â€â™‚ï¸,ğŸ‘©,ğŸ‘´ğŸ¼,ğŸ‘µ,,ğŸ§“,ğŸ§‘â€ğŸš’,ğŸ‘©ğŸ½â€ğŸš’,ğŸ‘®,ğŸ‘®ğŸ»â€â™€ï¸,ğŸ‘®ğŸ»â€â™‚ï¸,ğŸ«…,ğŸ‘¸ğŸ»,ğŸ¦¸ğŸ½,ğŸ¦¹ğŸ½â€â™‚ï¸,ğŸ§›ğŸ»,ğŸ§›â€â™€ï¸,ğŸ§œ,ğŸ§œâ€â™‚ï¸,ğŸ§œâ€â™€ï¸,ğŸ§,ğŸ§Ÿ,ğŸ„,ğŸ‡,ğŸ¤º,ğŸ’ƒğŸ¼,ğŸŒï¸,ğŸš£,ğŸš£â€â™€ï¸,ğŸŠ,â›¹ğŸ¼,â›¹ğŸ»â€â™€ï¸,ğŸ‹ï¸â€â™‚ï¸,ğŸ‹ğŸ»â€â™€ï¸,ğŸš´,ğŸ‘£,ğŸ¦•,ğŸ¦–,ğŸ«†,ğŸµ,ğŸ¶,ğŸº,ğŸ¦Š,ğŸ±,ğŸ¦,ğŸ¯,ğŸ´,ğŸ¦„,ğŸ®,ğŸ·,ğŸ­,ğŸ¹,ğŸ°,ğŸ¦“,ğŸ»,ğŸ¼,ğŸ¦˜,ğŸ¦¡,ğŸ¨,ğŸ”,ğŸ¦,ğŸ¤,ğŸ¦‰,ğŸŒ´,ğŸŒµ,ğŸŒ·,ğŸŒ»,ğŸŒ¼,ğŸ‚,ğŸ,ğŸŒ¾,ğŸŒ±,ğŸ„,ğŸŒ²,ğŸŒ³,ğŸŒ¿,â˜˜ï¸,ğŸ€,ğŸŒ¹,ğŸŒº,ğŸŒ¸,ğŸŒ,ğŸŒ,ğŸŒ›,ğŸŒœ,ğŸŒš,ğŸŒ•,ğŸ,ğŸ,ğŸ,ğŸŠ,ğŸ‹,ğŸŒ,ğŸ‰,ğŸ‡,ğŸ“,ğŸˆ,ğŸ’,ğŸ‘,ğŸ,ğŸ¥­,ğŸ¥¥,ğŸ¥,ğŸ…,ğŸ¥‘,ğŸ†,ğŸ¥’,ğŸ¥¬,ğŸŒ¶ï¸,ğŸŒ½,ğŸ¥•,ğŸ°,ğŸ‚,ğŸ§,ğŸ¦,ğŸ§,ğŸ¨,ğŸ©,ğŸª,ğŸ«,ğŸ¬,ğŸ­,ğŸ®,ğŸ¯,ğŸ¼,ğŸ¥›,ğŸµ,ğŸ¶,ğŸ¾,ğŸ·,ğŸ¸,ğŸ¹,ğŸº,ğŸ»,ğŸ¥‚,ğŸ™,ğŸ˜,ğŸ¥©,ğŸ—,ğŸ§€,ğŸ¥š,ğŸœ,ğŸ‡ªğŸ‡¦,ğŸ‡ªğŸ‡º,ğŸ,ğŸš©,ğŸ´â€â˜ ï¸,ğŸƒ,ğŸ„,âœ¨,ğŸˆ,ğŸŠ,ğŸ,ğŸ,ğŸ,ğŸ‘,ğŸ§§,ğŸ€,ğŸ,ğŸ«,ğŸŸï¸,ğŸ–ï¸,ğŸ†,ğŸ…,ğŸ¥‡,ğŸ¥ˆ,ğŸ¥‰,âš½,âš¾,ğŸ¥,ğŸ€,ğŸ,ğŸˆ,ğŸ‰,ğŸ¾,ğŸ¥,ğŸ³,ğŸ,ğŸ‘,ğŸ’,ğŸ¥,ğŸ“,ğŸ¸,ğŸ¥Š,ğŸ¥‹,ğŸ¥…,â›³,â›¸ï¸,ğŸ£,ğŸ¤¿,ğŸ½,ğŸ¿,ğŸ›·,ğŸ¥Œ,ğŸ¯,ğŸª€,ğŸª,ğŸ”«,ğŸ±,ğŸ”®,ğŸª„,ğŸ®,ğŸ•¹ï¸,ğŸ°,ğŸ²,ğŸ§©,ğŸ§¸,ğŸª©,ğŸª†,â™ ï¸,â™¥ï¸,â™¦ï¸,â™£ï¸,â™Ÿï¸,ğŸƒ,ğŸ€„,ğŸ´,ğŸ­,ğŸ¨,ğŸ§µ,ğŸª¡,ğŸ§¶,ğŸª¢,ğŸ‘‘,ğŸ’,ğŸ’,ğŸ’„,ğŸ‘—,ğŸ‘˜,ğŸ¥»,ğŸ‘”,ğŸ§¥,ğŸ¦º,ğŸ¥¼,ğŸ•¶ï¸,ğŸ‘œ,ğŸ‘›,ğŸ‘,ğŸ’,ğŸª­,ğŸ‘™,ğŸ©±,ğŸ©³,ğŸ©²,ğŸ¥¾,ğŸ‘ ,ğŸ‘Ÿ,ğŸ©´,ğŸµ,ğŸ™ï¸,ğŸšï¸,ğŸ›ï¸,ğŸ¤,ğŸ§,ğŸ“¢,ğŸ“¯,ğŸ””,ğŸ“»,ğŸ·,ğŸª—,ğŸ¸,ğŸ¹,ğŸº,ğŸ»,ğŸª•,ğŸ¥,ğŸª˜,ğŸª‡,ğŸªˆ,ğŸª‰,ğŸ“±,â˜ï¸,ğŸ“,ğŸ“ ,ğŸ”‹,ğŸ”Œ,ğŸ’»,ğŸ–¥ï¸,ğŸ–±ï¸,âŒ¨ï¸,ğŸ–²ï¸,ğŸ’½,ğŸ’¾,ğŸ“€,ğŸ§®,ğŸ¥,ğŸ,ğŸ“½ï¸,ğŸ¬,ğŸ“º,ğŸ“·ï¸,ğŸ“¸,ğŸ“¹,ğŸ“¼,ğŸ”,ğŸ•¯ï¸,ğŸ’¡,ğŸ”¦,ğŸ“”,ğŸ—ï¸,ğŸ’°,ğŸª™,ğŸ’´,ğŸ’µ,ğŸ’¶,ğŸ’·,ğŸ’¸,ğŸ’³,âœ‰ï¸,ğŸ“«,âœï¸,âœ’ï¸,ğŸ–Šï¸,ğŸ–Œ,ğŸ–ï¸,ï¸ğŸ’¼,ğŸ“‚,ğŸ“,ğŸ“,ğŸ“,âœ‚ï¸,ğŸ—‘ï¸,ğŸ”’,ğŸ”“,ğŸ”‘,ğŸ—ï¸,ğŸ”¨,ğŸª“,â›ï¸,âš’ï¸,ğŸ› ï¸,âš”ï¸,ğŸªƒ,ğŸ’£,ğŸ¹,ğŸ›¡ï¸,ğŸªš,ğŸ”§,ğŸª›,âš™ï¸,âš–ï¸,ğŸ¦¯,ğŸ”—,ğŸª,ğŸ§°,ğŸ§²,ğŸªœ,ğŸª,ğŸ§ªï¸,ğŸ§¬,ğŸ”¬,ğŸ”­,ğŸ“¡,ğŸ’‰,ğŸ©¸,ğŸ’Š,ğŸ©¹,ğŸ©¼,ğŸ©º,ğŸª,ğŸ›ï¸,ğŸ›‹ï¸,ğŸª‘,ğŸš½,ğŸª ,ğŸš¿,ğŸ›,ğŸª’,ğŸ§´,ğŸ§·,ğŸ§¹,ğŸ§º,ğŸ§»,ğŸª£,ğŸ«§,ğŸ§¯,ğŸ›’,âš°ï¸,ğŸª¦,âš±ï¸,ğŸ§¿,ğŸª¬,ğŸª§]

// Text
string = "Name";
// Font size.
font_size = 10;
// Emoji size.
emoji_size = 12;
//Font family.
font_name = "Adwaita Sans";
style = "Bold Italic";//[Regular,Bold, Italic, Bold Italic]

font_text = str(font_name, ":style=", style);

// -- Margin and spaces

// Left margin.
left_margin = 8;
// Space between emoji and text.
emoji_text_space = 10;
// Right margin.
right_margin = 10;       

// -- Grosores

// Plate thickness.
thicknessPlate = 3;
//Heigh of the layer (emoji, text, stroke).
heightLayer = 2; 
//Stroke thickness.
thicknessStroke = 2; 

// -- Keychain geometry.

// Width
ly = 20;
// Radius points.
r = 4;
// External radius keychain.
r_ext_key = 5;
// Internal radius keychain.
r_int_key = 3; 
$fn = 100;

// ==========================================
// 2. Automated calcs (NOT TOUCH)
// ==========================================
// Calculate width of text (number chars * size * correction factor) 
ancho_texto_estimado = len(string) * font_size * 0.65;

// Total length of the body (lx)
lx = left_margin + emoji_size + emoji_text_space + ancho_texto_estimado + right_margin;

// Basic Coordinates.
x0 = r_ext_key;
x1 = r_ext_key + lx;
y0 = ly/2;
y1 = -ly/2;

// Text position.
pos_x_texto = x0 + left_margin + emoji_size + emoji_text_space;

// Keychain body points.
POINT_A = [[x0, y0], [x1, y0], [x0, y1], [x1, y1]];
POINT_B = [
    [x0 + thicknessStroke, y0 - thicknessStroke],
    [x1 - thicknessStroke, y0 - thicknessStroke],
    [x0 + thicknessStroke, y1 + thicknessStroke],
    [x1 - thicknessStroke, y1 + thicknessStroke]
];

// ==========================================
// 3. Render
// ==========================================

// -- EMOJI --
translate([x0 + left_margin + emoji_size/2, 0, thicknessPlate])
linear_extrude(height = heightLayer) {
    text(emoji, size = emoji_size, font = "Noto Emoji", halign = "center", valign = "center");
};

// -- TEXT --
translate([pos_x_texto, 0, thicknessPlate])
    linear_extrude(height = heightLayer)
    text(string, font = font_text,size=font_size, spacing=0.9, halign = "left", valign = "center");

// -- Keychain --
difference(){
    cylinder(r = r_ext_key, h = thicknessPlate);
    cylinder(r = r_int_key, h = thicknessPlate*4, center = true);
}

// -- Keychain plate --
difference(){
    hull() {
        for (pos = POINT_A) translate(pos) cylinder(r = r, h = thicknessPlate + heightLayer);
    }
    // Decorative hole (the upper "emptying").
    translate([0, 0, thicknessPlate])
    hull() {
        for (pos = POINT_B) translate([pos[0], pos[1], 0]) cylinder(r = r, h = heightLayer + 1);
    }    
}